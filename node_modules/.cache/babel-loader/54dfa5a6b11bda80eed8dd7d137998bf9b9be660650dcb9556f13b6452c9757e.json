{"ast":null,"code":"import axios from \"axios\";\nconst BASE_URL = `${process.env.REACT_APP_BACKEND_API_BASE_URL}` || \"http://localhost:4000\";\n\n//const TOKEN = localStorage?.getItem(\"persist:root\") && JSON.parse(JSON.parse(localStorage?.getItem(\"persist:root\"))?.currentUser)?.accessToken;\n//in above line i have used optionl chaining and it makes code hard to read so i made a simpler function\n\nfunction getAccessToken() {\n  const storage = JSON.parse(localStorage.getItem(\"persist:root\"));\n  const currentUser = storage ? JSON.parse(storage.currentUser) : null;\n  return currentUser ? currentUser === null || currentUser === void 0 ? void 0 : currentUser.accessToken : null;\n}\nexport const publicRequest = axios.create({\n  baseURL: BASE_URL\n});\nexport const userRequest = axios.create({\n  baseURL: BASE_URL\n  //headers: { token: `Bearer ${TOKEN}`},\n});\nuserRequest.interceptors.request.use(config => {\n  const newToken = getAccessToken();\n  if (newToken) {\n    config.headers.token = `Bearer ${newToken}`;\n  }\n  return config;\n});","map":{"version":3,"names":["axios","BASE_URL","process","env","REACT_APP_BACKEND_API_BASE_URL","getAccessToken","storage","JSON","parse","localStorage","getItem","currentUser","accessToken","publicRequest","create","baseURL","userRequest","interceptors","request","use","config","newToken","headers","token"],"sources":["C:/Users/Mihir k/first-react/panara/react/src/axiosReqMethods.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\n\r\nconst BASE_URL = `${process.env.REACT_APP_BACKEND_API_BASE_URL}` || \"http://localhost:4000\";\r\n\r\n//const TOKEN = localStorage?.getItem(\"persist:root\") && JSON.parse(JSON.parse(localStorage?.getItem(\"persist:root\"))?.currentUser)?.accessToken;\r\n//in above line i have used optionl chaining and it makes code hard to read so i made a simpler function\r\n\r\nfunction getAccessToken() {\r\n  const storage = JSON.parse(localStorage.getItem(\"persist:root\"))\r\n  const currentUser =  storage ? JSON.parse(storage.currentUser) : null;\r\n  return currentUser ? currentUser?.accessToken : null\r\n}\r\n\r\n\r\nexport const publicRequest = axios.create({\r\n  baseURL: BASE_URL,\r\n});\r\n\r\nexport const userRequest = axios.create({\r\n  baseURL: BASE_URL,\r\n  //headers: { token: `Bearer ${TOKEN}`},\r\n});\r\n\r\nuserRequest.interceptors.request.use(config => {\r\n  const newToken = getAccessToken();\r\n  if (newToken) {\r\n    config.headers.token = `Bearer ${newToken}`;\r\n  }\r\n  return config;\r\n});\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAGzB,MAAMC,QAAQ,GAAG,GAAGC,OAAO,CAACC,GAAG,CAACC,8BAA8B,EAAE,IAAI,uBAAuB;;AAE3F;AACA;;AAEA,SAASC,cAAcA,CAAA,EAAG;EACxB,MAAMC,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC,CAAC;EAChE,MAAMC,WAAW,GAAIL,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACF,OAAO,CAACK,WAAW,CAAC,GAAG,IAAI;EACrE,OAAOA,WAAW,GAAGA,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEC,WAAW,GAAG,IAAI;AACtD;AAGA,OAAO,MAAMC,aAAa,GAAGb,KAAK,CAACc,MAAM,CAAC;EACxCC,OAAO,EAAEd;AACX,CAAC,CAAC;AAEF,OAAO,MAAMe,WAAW,GAAGhB,KAAK,CAACc,MAAM,CAAC;EACtCC,OAAO,EAAEd;EACT;AACF,CAAC,CAAC;AAEFe,WAAW,CAACC,YAAY,CAACC,OAAO,CAACC,GAAG,CAACC,MAAM,IAAI;EAC7C,MAAMC,QAAQ,GAAGhB,cAAc,CAAC,CAAC;EACjC,IAAIgB,QAAQ,EAAE;IACZD,MAAM,CAACE,OAAO,CAACC,KAAK,GAAG,UAAUF,QAAQ,EAAE;EAC7C;EACA,OAAOD,MAAM;AACf,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}