{"ast":null,"code":"import styled from\"styled-components\";import{useLocation,useNavigate}from\"react-router-dom\";import{useState}from\"react\";import{publicRequest}from\"../axiosReqMethods\";import{mobile}from'../Responsive';import Navbar from\"../components/Navbar\";import{CheckCircleOutlined}from\"@material-ui/icons\";import{useDispatch}from\"react-redux\";import{setError}from\"../redux/errorRedux\";//import CheckCircleOutlinedIcon from '@mui/icons-material/CheckCircleOutlined';\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Container=styled.div`\n    width: 100vw;\n    height: calc(100vh - 58px); //60px of navbar\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n    background-color: #f2f2f2;\n    background-image: linear-gradient(\n      rgba(255,255,255, 0.5),\n      rgba(255,255,255, 0.5)\n      ),\n      url(\"https://images.pexels.com/photos/131634/pexels-photo-131634.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1\");\n`;const Wrapper=styled.div`\n    padding: 30px 40px;\n    width: min(300px, 80%);\n    background-color: white;\n    flex-direction: row;\n    position: relative;\n    border-radius: 1vmax;\n    box-shadow: 20px 20px 50px grey;\n    ${mobile({padding:\"15px 20px\"})}\n`;const Form=styled.form`\n   margin-bottom: 40px;\n`;const Title=styled.h1`\n    text-align: center;\n    margin-bottom: 20px;\n    \n`;const P=styled.p`\ntext-align: center;\n    max-width: 90%;\n    text-align: center;\n    margin-top: 15px;\n    margin-bottom: 30px;\n    margin-left: 13px;\n    font-weight: 400;\n`;const Input=styled.input`\n    padding: 5px;\n    width: min(290px, 95%);\n    margin-bottom: 15px;\n    font-size: 1rem;\n    border-radius: 0.5vmax;\n    \n`;const Button=styled.button`\n    padding: 5px;\n    width: min(304px, 100%);\n    margin-bottom: 10px;\n    border-radius: 0.5vmax;\n    background-color: teal;\n    color: white;\n    border: none;\n    cursor: pointer;\n    &:disabled {\n        cursor: not-allowed;\n        background-color: #9af5f5;\n    }\n    \n\n`;const Button2=styled.button`\n    text-align: center;\n    position: absolute;\n    width: min(485px, 100%);\n    //height: 20px;\n    padding: 15px 0px;\n    left: 0px;\n    cursor: pointer;\n    border: none;\n    //box-shadow: 20px 20px 50px grey;\n    border-radius: 0vmax 0vmax 1vmax 1vmax;\n    cursor: pointer;\n`;//success page\nconst Wrapper2=styled.div`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n    background-color: white;\n    padding: 30px 40px;\n    width: min(400px, 80%);\n    border-radius: 1vmax;\n    box-shadow: 20px 20px 50px grey;\n    position: relative;\n    ${mobile({minWidth:\"80%\",padding:\"15px 20px\"})}\n`;const BackToLogin=styled.button`\n    border-radius: 0vmax 0vmax 1vmax 1vmax;\n    //background-color: white;\n    width: min(500px, 100%);\n    position: absolute;\n    bottom: -10px;\n    border: none;\n    //border-top: 1px solid gray;\n    font-size: 15px;\n    padding: 15px 0px;\n    cursor: pointer;\n    ${mobile({minWidth:\"100%\"})}\n\n`;const ResetPassword=()=>{const dispatch=useDispatch();const[message,setmessage]=useState(\"\");const navigate=useNavigate();const[password,setpassword]=useState(null);const[cpassword,setCpassword]=useState(null);console.log(password);const location=useLocation();const id=location.pathname.split(\"/\")[2];console.log(id);const[passChanged,setpassChanged]=useState(false);const handleSubmit=async e=>{e.preventDefault();if(password!==cpassword){dispatch(setError(\"Passwords do not match\"));setCpassword(\"\");setpassword(\"\");return;}try{const{data}=await publicRequest.post(`/api/auth/resetpassword/${id}`,{password});setmessage(data.data);setpassChanged(true);}catch(error){var _error$response,_error$response$data;console.log(error);dispatch(setError(error===null||error===void 0?void 0:(_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error));setpassChanged(false);}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(Container,{children:!passChanged?/*#__PURE__*/_jsxs(Wrapper,{children:[/*#__PURE__*/_jsx(Title,{children:\"Trouble Logging In?\"}),/*#__PURE__*/_jsx(P,{children:\"Enter your password and we'll send you a link to reset your account password.\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(Input,{type:\"password\",placeholder:\"Password\",value:password,onChange:e=>setpassword(e.target.value)}),/*#__PURE__*/_jsx(Input,{type:\"password\",placeholder:\"Confirm Password\",value:cpassword,onChange:e=>setCpassword(e.target.value)}),/*#__PURE__*/_jsx(Button,{disabled:!password||!cpassword,children:\"Change Password\"})]}),/*#__PURE__*/_jsx(Button2,{onClick:()=>navigate(\"/login\"),children:\"Back To Login\"})]}):/*#__PURE__*/_jsxs(Wrapper2,{children:[/*#__PURE__*/_jsx(CheckCircleOutlined,{style:{color:\"green\",fontSize:\"150px\",margin:\"20px 0px\"}}),/*#__PURE__*/_jsx(\"h1\",{style:{margin:\"10px 0px\"},children:\"Password Changed!\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:\"10px 0px\",marginBottom:'40px'},children:\"Your password has been changed successfully\"}),/*#__PURE__*/_jsx(BackToLogin,{onClick:()=>navigate(\"/login\"),children:\"Back to login\"})]})})]});};export default ResetPassword;","map":{"version":3,"names":["styled","useLocation","useNavigate","useState","publicRequest","mobile","Navbar","CheckCircleOutlined","useDispatch","setError","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Container","div","Wrapper","padding","Form","form","Title","h1","P","p","Input","input","Button","button","Button2","Wrapper2","minWidth","BackToLogin","ResetPassword","dispatch","message","setmessage","navigate","password","setpassword","cpassword","setCpassword","console","log","location","id","pathname","split","passChanged","setpassChanged","handleSubmit","e","preventDefault","data","post","error","_error$response","_error$response$data","response","children","onSubmit","type","placeholder","value","onChange","target","disabled","onClick","style","color","fontSize","margin","marginBottom"],"sources":["M:/first-react/panara/react/src/pages/ResetPassword.js"],"sourcesContent":["import styled from \"styled-components\"\r\nimport { useLocation, useNavigate } from \"react-router-dom\"\r\nimport { useState } from \"react\"\r\nimport { publicRequest } from \"../axiosReqMethods\"\r\nimport { mobile } from '../Responsive'\r\nimport Navbar from \"../components/Navbar\"\r\nimport { CheckCircleOutlined } from \"@material-ui/icons\"\r\nimport { useDispatch } from \"react-redux\"\r\nimport { setError } from \"../redux/errorRedux\"\r\n//import CheckCircleOutlinedIcon from '@mui/icons-material/CheckCircleOutlined';\r\n\r\n\r\nconst Container = styled.div`\r\n    width: 100vw;\r\n    height: calc(100vh - 58px); //60px of navbar\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    flex-direction: column;\r\n    background-color: #f2f2f2;\r\n    background-image: linear-gradient(\r\n      rgba(255,255,255, 0.5),\r\n      rgba(255,255,255, 0.5)\r\n      ),\r\n      url(\"https://images.pexels.com/photos/131634/pexels-photo-131634.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1\");\r\n`\r\nconst Wrapper = styled.div`\r\n    padding: 30px 40px;\r\n    width: min(300px, 80%);\r\n    background-color: white;\r\n    flex-direction: row;\r\n    position: relative;\r\n    border-radius: 1vmax;\r\n    box-shadow: 20px 20px 50px grey;\r\n    ${mobile({\r\n        padding: \"15px 20px\",\r\n    })}\r\n`\r\n\r\nconst Form = styled.form`\r\n   margin-bottom: 40px;\r\n`\r\nconst Title = styled.h1`\r\n    text-align: center;\r\n    margin-bottom: 20px;\r\n    \r\n`\r\nconst P = styled.p`\r\ntext-align: center;\r\n    max-width: 90%;\r\n    text-align: center;\r\n    margin-top: 15px;\r\n    margin-bottom: 30px;\r\n    margin-left: 13px;\r\n    font-weight: 400;\r\n`\r\nconst Input = styled.input`\r\n    padding: 5px;\r\n    width: min(290px, 95%);\r\n    margin-bottom: 15px;\r\n    font-size: 1rem;\r\n    border-radius: 0.5vmax;\r\n    \r\n`\r\nconst Button = styled.button`\r\n    padding: 5px;\r\n    width: min(304px, 100%);\r\n    margin-bottom: 10px;\r\n    border-radius: 0.5vmax;\r\n    background-color: teal;\r\n    color: white;\r\n    border: none;\r\n    cursor: pointer;\r\n    &:disabled {\r\n        cursor: not-allowed;\r\n        background-color: #9af5f5;\r\n    }\r\n    \r\n\r\n`\r\n\r\n\r\nconst Button2 = styled.button`\r\n    text-align: center;\r\n    position: absolute;\r\n    width: min(485px, 100%);\r\n    //height: 20px;\r\n    padding: 15px 0px;\r\n    left: 0px;\r\n    cursor: pointer;\r\n    border: none;\r\n    //box-shadow: 20px 20px 50px grey;\r\n    border-radius: 0vmax 0vmax 1vmax 1vmax;\r\n    cursor: pointer;\r\n`\r\n\r\n//success page\r\nconst Wrapper2 = styled.div`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    flex-direction: column;\r\n    background-color: white;\r\n    padding: 30px 40px;\r\n    width: min(400px, 80%);\r\n    border-radius: 1vmax;\r\n    box-shadow: 20px 20px 50px grey;\r\n    position: relative;\r\n    ${mobile({\r\n        minWidth: \"80%\",\r\n        padding: \"15px 20px\",\r\n    })}\r\n`\r\n\r\nconst BackToLogin = styled.button`\r\n    border-radius: 0vmax 0vmax 1vmax 1vmax;\r\n    //background-color: white;\r\n    width: min(500px, 100%);\r\n    position: absolute;\r\n    bottom: -10px;\r\n    border: none;\r\n    //border-top: 1px solid gray;\r\n    font-size: 15px;\r\n    padding: 15px 0px;\r\n    cursor: pointer;\r\n    ${mobile({\r\n        minWidth: \"100%\"\r\n    })}\r\n\r\n`\r\nconst ResetPassword = () => {\r\n    const dispatch = useDispatch()\r\n    const [message, setmessage] = useState(\"\")\r\n    const navigate = useNavigate();\r\n    const [password, setpassword] = useState(null)\r\n    const [cpassword, setCpassword] = useState(null)\r\n    console.log(password)\r\n\r\n\r\n    const location = useLocation();\r\n    const id = location.pathname.split(\"/\")[2];\r\n    console.log(id)\r\n\r\n    const [passChanged, setpassChanged] = useState(false)\r\n    const handleSubmit = async (e)  => {\r\n        e.preventDefault()\r\n        if(password !== cpassword) {\r\n            dispatch(setError(\"Passwords do not match\"))\r\n            setCpassword(\"\");\r\n            setpassword(\"\");\r\n            return\r\n        }\r\n        \r\n        try {   \r\n            const {data} = await publicRequest.post(`/api/auth/resetpassword/${id}`, {password})\r\n            setmessage(data.data);\r\n            setpassChanged(true);\r\n        \r\n        } catch (error) {\r\n            console.log(error)\r\n            dispatch(setError(error?.response?.data?.error))\r\n            setpassChanged(false)\r\n        } \r\n    }\r\n  return (\r\n    <>\r\n    <Navbar/>\r\n    <Container>\r\n        {!passChanged ? <Wrapper> \r\n            <Title>Trouble Logging In?</Title>\r\n            <P>Enter your password and we'll send you a link to reset your account password.</P>\r\n                <Form onSubmit={handleSubmit}>\r\n\r\n                    <Input type=\"password\" placeholder=\"Password\" value={password} onChange={(e) => setpassword(e.target.value)}></Input>\r\n                    <Input type=\"password\" placeholder=\"Confirm Password\" value={cpassword} onChange={(e) => setCpassword(e.target.value)}></Input>\r\n\r\n\r\n                    <Button disabled={!password || !cpassword}>Change Password</Button>\r\n                </Form>\r\n                <Button2 onClick={() => navigate(\"/login\")}>Back To Login</Button2>\r\n        </Wrapper> \r\n        :\r\n        <Wrapper2>\r\n        <CheckCircleOutlined style={{color: \"green\", fontSize: \"150px\", margin: \"20px 0px\"}}/>\r\n        <h1 style={{margin: \"10px 0px\"}}>Password Changed!</h1>\r\n        <p style={{margin: \"10px 0px\", marginBottom:'40px'}}>Your password has been changed successfully</p>\r\n        <BackToLogin onClick={() => navigate(\"/login\")}>Back to login</BackToLogin>\r\n        \r\n        </Wrapper2>  \r\n        }\r\n    </Container>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ResetPassword"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}