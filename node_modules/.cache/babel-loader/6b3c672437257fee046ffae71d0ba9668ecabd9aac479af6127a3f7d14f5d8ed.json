{"ast":null,"code":"import axios from\"axios\";const BASE_URL=`${process.env.REACT_APP_BACKEND_API_BASE_URL}`||\"http://localhost:4000\";//const TOKEN = localStorage?.getItem(\"persist:root\") && JSON.parse(JSON.parse(localStorage?.getItem(\"persist:root\"))?.currentUser)?.accessToken;\n//in above line i have used optionl chaining and it makes code hard to read so i made a simpler function\nfunction getAccessToken(){const storage=JSON.parse(localStorage.getItem(\"persist:root\"));const currentUser=storage?JSON.parse(storage.currentUser):null;return currentUser?currentUser===null||currentUser===void 0?void 0:currentUser.accessToken:null;}export const publicRequest=axios.create({baseURL:BASE_URL});export const userRequest=axios.create({baseURL:BASE_URL//headers: { token: `Bearer ${TOKEN}`},\n});userRequest.interceptors.request.use(config=>{const newToken=getAccessToken();if(newToken){config.headers.token=`Bearer ${newToken}`;}return config;});","map":{"version":3,"names":["axios","BASE_URL","process","env","REACT_APP_BACKEND_API_BASE_URL","getAccessToken","storage","JSON","parse","localStorage","getItem","currentUser","accessToken","publicRequest","create","baseURL","userRequest","interceptors","request","use","config","newToken","headers","token"],"sources":["M:/first-react/panara/react/src/axiosReqMethods.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\n\r\nconst BASE_URL = `${process.env.REACT_APP_BACKEND_API_BASE_URL}` || \"http://localhost:4000\";\r\n\r\n//const TOKEN = localStorage?.getItem(\"persist:root\") && JSON.parse(JSON.parse(localStorage?.getItem(\"persist:root\"))?.currentUser)?.accessToken;\r\n//in above line i have used optionl chaining and it makes code hard to read so i made a simpler function\r\n\r\nfunction getAccessToken() {\r\n  const storage = JSON.parse(localStorage.getItem(\"persist:root\"))\r\n  const currentUser =  storage ? JSON.parse(storage.currentUser) : null;\r\n  return currentUser ? currentUser?.accessToken : null\r\n}\r\n\r\n\r\nexport const publicRequest = axios.create({\r\n  baseURL: BASE_URL,\r\n});\r\n\r\nexport const userRequest = axios.create({\r\n  baseURL: BASE_URL,\r\n  //headers: { token: `Bearer ${TOKEN}`},\r\n});\r\n\r\nuserRequest.interceptors.request.use(config => {\r\n  const newToken = getAccessToken();\r\n  if (newToken) {\r\n    config.headers.token = `Bearer ${newToken}`;\r\n  }\r\n  return config;\r\n});\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAGzB,KAAM,CAAAC,QAAQ,CAAG,GAAGC,OAAO,CAACC,GAAG,CAACC,8BAA8B,EAAE,EAAI,uBAAuB,CAE3F;AACA;AAEA,QAAS,CAAAC,cAAcA,CAAA,CAAG,CACxB,KAAM,CAAAC,OAAO,CAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC,CAAC,CAChE,KAAM,CAAAC,WAAW,CAAIL,OAAO,CAAGC,IAAI,CAACC,KAAK,CAACF,OAAO,CAACK,WAAW,CAAC,CAAG,IAAI,CACrE,MAAO,CAAAA,WAAW,CAAGA,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAEC,WAAW,CAAG,IAAI,CACtD,CAGA,MAAO,MAAM,CAAAC,aAAa,CAAGb,KAAK,CAACc,MAAM,CAAC,CACxCC,OAAO,CAAEd,QACX,CAAC,CAAC,CAEF,MAAO,MAAM,CAAAe,WAAW,CAAGhB,KAAK,CAACc,MAAM,CAAC,CACtCC,OAAO,CAAEd,QACT;AACF,CAAC,CAAC,CAEFe,WAAW,CAACC,YAAY,CAACC,OAAO,CAACC,GAAG,CAACC,MAAM,EAAI,CAC7C,KAAM,CAAAC,QAAQ,CAAGhB,cAAc,CAAC,CAAC,CACjC,GAAIgB,QAAQ,CAAE,CACZD,MAAM,CAACE,OAAO,CAACC,KAAK,CAAG,UAAUF,QAAQ,EAAE,CAC7C,CACA,MAAO,CAAAD,MAAM,CACf,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}